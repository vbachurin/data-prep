<talend-dropdown on-open="datasetHeaderCtrl.initTransformations()">
    <div class="dropdown-container grid-header">
        <div class="dropdown-action">
            <div class="grid-header-title dropdown-button">{{ datasetHeaderCtrl.column.id }}</div>
            <div class="grid-header-type">{{ datasetHeaderCtrl.column.type }}</div>
        </div>
        <ul class="dropdown-menu grid-header-menu">
            <li ng-if="datasetHeaderCtrl.initTransformationsInProgress">Loading...</li>
            <li ng-if="!datasetHeaderCtrl.initTransformationsInProgress && datasetHeaderCtrl.transformationsRetrieveError"
                class="error">Error while getting transformations</li>
            <li ng-if="datasetHeaderCtrl.transformations && !datasetHeaderCtrl.transformations.length">No transformation available</li>

            <dataset-transform-menu
                    ng-repeat="item in datasetHeaderCtrl.transformations track by $index"
                    metadata="datasetHeaderCtrl.metadata"
                    column="datasetHeaderCtrl.column"
                    menu="item"></dataset-transform-menu>
        </ul>
    </div>
</talend-dropdown>

<div class="quality-bar">
    <div talend-dropdown
         class="record-ok"
         style="width: {{ datasetHeaderCtrl.column.quality.validPercentWidth }}%;"
         title="{{ datasetHeaderCtrl.column.quality.valid }} valid records ({{ datasetHeaderCtrl.column.quality.validPercent }}%)">

        <div class="dropdown-action"></div>
        <ul class="dropdown-menu quality-bar-menu" role="menu">
            <li role="presentation">
                <a role="menuitem" href="#">Select Valid Records for {{ datasetHeaderCtrl.column.id | uppercase }}</a>
            </li>
        </ul>
    </div>

    <div talend-dropdown
         class="record-empty"
         style="width: {{ datasetHeaderCtrl.column.quality.emptyPercentWidth }}%;"
         title="{{ datasetHeaderCtrl.column.quality.empty }} empty records ({{ datasetHeaderCtrl.column.quality.emptyPercent }}%)">

        <div class="dropdown-action"></div>
        <ul class="dropdown-menu quality-bar-menu" role="menu" >
            <li role="presentation"><a role="menuitem" href="#">Select Empty Records for {{ datasetHeaderCtrl.column.id | uppercase }}</a></li>
            <li class="divider"></li>
            <li role="presentation"><a role="menuitem" href="#">Fill Empty records with Top adjacent value</a></li>
            <li role="presentation"><a role="menuitem" href="#">Fill Empty records with Bottom adjacent value</a></li>
        </ul>
    </div>

    <div class="record-nok" talend-dropdown
         style="width: {{ datasetHeaderCtrl.column.quality.invalidPercentWidth }}%;"
         title="{{ datasetHeaderCtrl.column.quality.invalid }} invalid records ({{ datasetHeaderCtrl.column.quality.invalidPercent }}%)">

        <div class="dropdown-action"></div>
        <ul class="dropdown-menu quality-bar-menu" role="menu" >
            <li role="presentation"><a role="menuitem" href="#">Select Invalid Records for {{ datasetHeaderCtrl.column.id | uppercase }}</a></li>
            <li class="divider"></li>
            <li role="presentation"><a role="menuitem" href="#">Replace Invalid Records with Top adjacent value</a></li>
            <li role="presentation"><a role="menuitem" href="#">Replace Invalid Records with Bottom adjacent value</a></li>
        </ul>
    </div>
</div>
