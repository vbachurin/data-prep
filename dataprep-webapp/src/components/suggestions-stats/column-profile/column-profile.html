<div class="column-profile" ng-switch="!!(columnProfileCtrl.state.playground.statistics.histogram || columnProfileCtrl.stateDistribution)">

    <div id="chart-ghost" class="loading-container" ng-switch-when="false">
        <img id="chart-ghost-img" src="/assets/images/refreshing-ghost-chart.png">
        <div id="chart-ghost-message" class="loading-msg">
            <span class="wait-icon continuous-rotate" ><i data-icon="c" class="icon"></i></span>
            <span class="wait-text" translate-once="REFRESHING_WAIT"></span>
        </div>
    </div>

    <div id="column-profile-chart" ng-switch-when="true">
        <div class="column-profile-aggregation">
            <talend-button-dropdown button-text="{{ columnProfileCtrl.getCurrentAggregation() | translate }} {{columnProfileCtrl.state.playground.statistics.histogram.aggregationColumn.name}}">
                <ul class="column-profile-aggregation-list">
                    <li ng-click="columnProfileCtrl.changeAggregation()">
                        <div translate-once="LINE_COUNT"></div>
                    </li>
                    <li ng-repeat="column in columnProfileCtrl.aggregationColumns track by column.id" class="more">
                        <div class="moreText" title="{{column.name}}">{{column.name}}</div>
                        <ul class="submenu">
                            <li ng-repeat="aggregation in columnProfileCtrl.aggregations track by $index" ng-click="columnProfileCtrl.changeAggregation(column, aggregation)" title="{{ ::aggregation | translate }}">
                                <div class="moreText" translate-once="{{aggregation}}"></div>
                            </li>
                        </ul>
                    </li>
                </ul>
            </talend-button-dropdown>

            <div ng-if="columnProfileCtrl.state.playground.statistics.histogram.aggregation" class="column-profile-aggregation-description">
                <span>{{columnProfileCtrl.state.playground.statistics.histogram.aggregation | translate}}</span>
                <span class="highlight">{{columnProfileCtrl.state.playground.statistics.histogram.aggregationColumn.name}}</span>
                <span translate-once="GROUP_BY"></span>
                <span class="highlight">{{columnProfileCtrl.state.playground.statistics.histogram.column.name}}</span>
            </div>
        </div>

        <div style="min-height: 160px;">
            <horizontal-barchart id="hBarChart"
                                 ng-if="!columnProfileCtrl.state.playground.statistics.histogram.vertical"
                                 width="300"
                                 height="400"
                                 on-click="columnProfileCtrl.addBarchartFilter(item)"

                                 key-field="{{columnProfileCtrl.state.playground.statistics.histogram.keyField}}"
                                 key-label="{{columnProfileCtrl.state.playground.statistics.histogram.label}}"

                                 primary-data="columnProfileCtrl.state.playground.statistics.histogram.data"
                                 primary-value-field="{{columnProfileCtrl.state.playground.statistics.histogram.valueField}}"
                                 primary-bar-class="{{columnProfileCtrl.state.playground.statistics.histogram.className}}"

                                 secondary-data="columnProfileCtrl.state.playground.statistics.filteredHistogram.data"
                                 secondary-value-field="{{columnProfileCtrl.state.playground.statistics.filteredHistogram.valueField}}"
                                 secondary-bar-class="{{columnProfileCtrl.state.playground.statistics.filteredHistogram.className}}"
            ></horizontal-barchart>

            <vertical-barchart id="vBarChart"
                               ng-if="columnProfileCtrl.state.playground.statistics.histogram.vertical"
                               width="300"
                               height="150"
                               on-click="columnProfileCtrl.addRangeFilter(interval)"

                               key-field="{{columnProfileCtrl.state.playground.statistics.histogram.keyField}}"
                               key-label="{{columnProfileCtrl.state.playground.statistics.histogram.label}}"

                               primary-data="columnProfileCtrl.state.playground.statistics.histogram.data"
                               primary-value-field="{{columnProfileCtrl.state.playground.statistics.histogram.valueField}}"

                               secondary-data="columnProfileCtrl.state.playground.statistics.filteredHistogram.data"
                               secondary-value-field="{{columnProfileCtrl.state.playground.statistics.filteredHistogram.valueField}}"

                               active-limits="columnProfileCtrl.state.playground.statistics.activeLimits"></vertical-barchart>

            <highchart id="geochart"
                       ng-if="columnProfileCtrl.stateDistribution"
                       config="columnProfileCtrl.chartConfig"></highchart>
        </div>

        <range-slider id="rangeSliderId"
                      width="300"
                      height="65"
                      range-limits="columnProfileCtrl.statisticsService.rangeLimits"
                      on-brush-end="columnProfileCtrl.addRangeFilter(interval)">
        </range-slider>
    </div>
</div>
