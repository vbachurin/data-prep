/*  ============================================================================

  Copyright (C) 2006-2016 Talend Inc. - www.talend.com

  This source code is available under agreement available at
  https://github.com/Talend/data-prep/blob/master/LICENSE

  You should have received a copy of the agreement
  along with this program; if not, write to Talend SA
  9 rue Pages 92150 Suresnes, France

  ============================================================================*/

.modal {
  ///////////////////////////////////////////////////////////////////////////////////
  $base-border-color: gainsboro !default;
  $base-border-radius: 3px !default;
  $base-background-color: white !default;
  $base-font-size: 1em !default;
  $base-line-height: 1.5em !default;
  $base-accent-color: #477DCA !default;
  $dark-gray: #333 !default;
  $light-gray: #DDD !default;
  $medium-screen: em(640) !default;
  $large-screen: em(860) !default;
  $x-large-screen: em(1824) !default;
  $base-font-color: $dark-gray !default;
  $background-transparent: rgba(0,0,0, 0.70);

  $navigation-background-top: rgba(85, 89, 100, 0.8);
  $navigation-background-bottom: rgb(85, 89, 100);
  $navigation-border: #333;
  $navigation-border-height: 1px;
  $navigation-color: white;
  $navigation-height: 51px;
  $navigation-item-space: 10px;

  p {
    color: $base-font-color;
    line-height: $base-line-height;
  }
  //////////////////////////////////////////////////////////////////////////////////

  $modal-padding: 4em;
  $modal-padding-top: 3em;
  $modal-background: $base-background-color;
  $modal-close-color: $light-gray;
  $modal-image-height: 135px;
  $modal-image-width: $modal-image-height;
  $modal-trigger-image-width: 300px;

  label {
    cursor: pointer;
    margin-bottom: 0;
  }

  label img {
    border-radius: $modal-trigger-image-width / 2;
    display: block;
    max-width: $modal-trigger-image-width;
  }

  .modal-state {
    display: none;
  }

  .modal-window { // overlay
    @include position(absolute, 0px 0px 0px 0px);
    background: $background-transparent;
    opacity: 0;
    text-align: left;
    visibility: hidden;
    z-index: 10;

    @include media($medium-screen) {
      padding-top: 2em;
    }

    @include media($large-screen) {
      padding-top: 4em;
    }

    @include media($x-large-screen) {
      padding-top: 6em;
    }

    .modal-bg {
      @include position(absolute, 0px 0px 0px 0px);
      cursor: pointer;
    }
  }

  .modal-close {
    @include position(absolute, ($modal-padding-top /2) ($modal-padding /2) null null);
    @include size(2em);
    background: $modal-background;
    cursor: pointer;

    &:after,
    &:before {
      @include position(absolute, 3px 3px 0 50%);
      @include transform(rotate(45deg));
      @include size(0.15em 2em);
      background: $modal-close-color;
      content: '';
      display: block;
      margin: -3px 0 0 -1px;
    }

    &:hover:after,
    &:hover:before {
      background: darken($modal-close-color, 10%);
    }

    &:before {
      @include transform(rotate(-45deg));
    }
  }

  .modal-inner {
    background: $modal-background;
    border-radius: $base-border-radius;
    margin: auto;
    overflow: hidden;
    padding: $modal-padding / 2;
    padding-top: $modal-padding-top;
    position: relative;
    width: 95%;

    @include media($medium-screen) {
      width: 80%;
    }

    @include media($large-screen) {
      width: 900px;
    }

    h1 {
      color: $base-font-color;
      margin-bottom: 0.6em;
      text-align: left;
      text-transform: capitalize;
    }

    .modal-title {
      padding: 5px 5px 0;
      margin-top: $modal-padding / 2 - $modal-padding-top;
      border-bottom: 1px solid $medium-gray;
      font-weight: 300;
      font-size: 1.7em;
      text-transform: uppercase;

      height: 45px;
      overflow: hidden;
    }

    .modal-subtitle {
      color: $dark-gray;
      margin-bottom: 0.6em;
      padding: 5px 10px 0;
      font-style: italic;
    }

    .modal-intro {
      font-weight: 800;
    }

    .modal-content {
      color: $base-font-color;

      @include media($medium-screen) {
        @include columns(2 8em);
      }
    }

    .modal-buttons {
      padding-top: 10px;
      border-top: 1px solid $light-gray;

      .modal-secondary-button {
        float: left;
      }

      .modal-primary-button {
        float: right;
        margin-left: 10px;
      }
    }

    .modal-form-row {
      @include display(flex);
      @include flex-direction(row);
      @include flex-wrap(wrap);
      @include align-items(center);
      margin-bottom: 10px;

      .param-name {
        @include flex-basis(150px);
        @include flex-grow(1);
      }

      .param-input {
        @include flex-basis(250px);
        @include flex-grow(2);
        margin: 0;
      }
    }

    a.cta {
      color: white;
      display: inline-block;
      margin-right: 0.5em;
      margin-top: 1em;

      &:last-child {
        padding: 0 2em;
      }
    }

  }

  .modal-state:checked + .modal-window {
    visibility: visible;
    opacity: 1;
    @include animation(fadeIn 0.25s);
  }

  .modal-state:checked + .modal-window .modal-inner {
    top: 0.5em;
  }

  &.fullscreen {
    .modal-window {
      padding: 0;

      .modal-inner {
        overflow: auto;

        width: 100%;
        height: 100%;
        max-height: 100%;

        padding: 0;
        top: 0 !important;
        left: 0;
      }

      .modal-header-close {
        width: $navigation-height;
        height: $navigation-height;
        line-height: $navigation-height - 1px;
        cursor: pointer;

        position: absolute;
        right: 0;
        top: 0;

        &:after,
        &:before {
          @include position(absolute, $navigation-height/4 0 0 $navigation-height/2-2px);
          @include transform(rotate(45deg));
          @include size(0.15em 1.5em);
          background: $modal-close-color;
          content: '';
          display: block;
        }

        &:hover:after,
        &:hover:before {
          background: darken($modal-close-color, 10%);
        }

        &:before {
          @include transform(rotate(-45deg));
        }
      }

      .modal-header {
        display: table;
        height: $navigation-height;
        min-height: $navigation-height;
        width: 100%;

        @include background(linear-gradient($navigation-background-top, $navigation-background-bottom) left repeat);
        border-bottom: 1px solid darken($navigation-border, 10);

        color: $navigation-color;

        >ul {
          >* {
            display: table-cell;
            line-height: $navigation-height - $navigation-border-height;
            padding-left: $navigation-item-space;
            padding-right: $navigation-item-space;
            vertical-align: middle;
            border-right: 1px solid grey;

            .title {
              font-weight: bold;
            }

            input[type=search] {
              box-sizing: border-box;
              border-radius: $base-border-radius;
              border: $dark-gray;
              color: $black;
              font-size: 0.9em;
              font-style: italic;
              margin: 0;
              padding: 0.5em 0.8em;
              width: 100%;
            }

            input {
              display: inline-block;
              margin: 0;
              width: auto;
            }
          }
        }
      }

      .modal-body {
        @include calc(height, "100% - #{$navigation-height}");
        width: 100%;

        background: white;
        margin-left: auto;
        margin-right: auto;
      }
    }
  }
}

.modal-open {
  overflow: hidden;
}

.modal-closed {
  overflow: auto;
}
