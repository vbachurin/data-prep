<!--
  ~ ============================================================================
  ~
  ~  Copyright (C) 2006-2016 Talend Inc. - www.talend.com
  ~
  ~  This source code is available under agreement available at
  ~  https://github.com/Talend/data-prep/blob/master/LICENSE
  ~
  ~  You should have received a copy of the agreement
  ~  along with this program; if not, write to Talend SA
  ~  9 rue Pages 92150 Suresnes, France
  ~
  ~ ============================================================================
  -->

<div class="editable-regex" ng-switch="!!editableRegexCtrl.isReadonly">
    <div ng-switch-when="false">
        <talend-dropdown force-side="left">
            <button class="dropdown-action" type="button">{{editableRegexCtrl.getTypeKey()}}</button>
            <ul class="dropdown-menu">
                <li ng-repeat="type in ::editableRegexCtrl.types track by $index"
                    ng-click="editableRegexCtrl.setSelectedType(type)"
                    class="regex-type-item">
                    <span class="regex-type-item-key">{{::type.key}}</span>
                    <span class="regex-type-item-label">{{::type.label}}</span>
                </li>
            </ul>
        </talend-dropdown>

        <input type="text"
               ng-model="editableRegexCtrl.value.token"
               ng-trim="false"
               ng-model-options="{debounce: { 'default': 300, 'blur': 0 }}"/>
    </div>
    <div ng-switch-when="true">
        <span title="{{editableRegexCtrl.getTypeLabel()}}" ng-bind="editableRegexCtrl.getTypeKey()"></span>
        <span ng-switch="editableRegexCtrl.value.token ===''">
             <span ng-switch-when="true" class="label-none">{{'NONE' | translate}}</span>
             <span ng-switch-when="false">
                  <span ng-switch="!!editableRegexCtrl.transformText">
                     <span ng-switch-when="true"
                           ng-bind-html="editableRegexCtrl.transformText(editableRegexCtrl.value.token)"></span>
                     <span ng-switch-when="false" ng-bind="editableRegexCtrl.value.token"></span>
                  </span>
             </span>
        </span>
    </div>
</div>
